<div class="admin-container">
  <div class="admin-header">
    <h1>–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</h1>
  </div>

  <div class="admin-tabs">
    <div class="tab-buttons">
      <button
        class="tab-button"
        [class.active]="activeTab === 'posts'"
        (click)="switchTab('posts')"
      >
        –ü–æ—Å—Ç—ã
      </button>
      <button
        class="tab-button"
        [class.active]="activeTab === 'cars'"
        (click)="switchTab('cars')"
      >
        –û–±—ä—è–≤–ª–µ–Ω–∏—è
      </button>
      <button
        class="tab-button"
        [class.active]="activeTab === 'users'"
        (click)="switchTab('users')"
      >
        –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
      </button>
    </div>

    <div class="tab-content" [class.active]="activeTab === 'posts'">
      <section class="admin-section">
        <h2>–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø–æ—Å—Ç–∞</h2>
        <form class="admin-form">
          <div class="form-group">
            <label for="post-title">–ó–∞–≥–æ–ª–æ–≤–æ–∫ –ø–æ—Å—Ç–∞</label>
            <input
              type="text"
              id="post-title"
              class="form-control"
              placeholder="–í–≤–µ–¥–∏—Ç–µ –∑–∞–≥–æ–ª–æ–≤–æ–∫"
              [ngModelOptions]="{ standalone: true }"
              [(ngModel)]="postTitle"
            />
          </div>

          <div class="form-group">
            <label for="post-text">–¢–µ–∫—Å—Ç –ø–æ—Å—Ç–∞</label>
            <textarea
              id="post-text"
              class="form-control"
              rows="5"
              placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –ø–æ—Å—Ç–∞"
              [ngModelOptions]="{ standalone: true }"
              [(ngModel)]="postText"
            ></textarea>
          </div>

          <!-- <div class="form-group">
            <label for="post-category">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</label>
            <select id="post-category" class="form-control">
              <option value="news">–ù–æ–≤–æ—Å—Ç–∏</option>
              <option value="tips">–°–æ–≤–µ—Ç—ã</option>
              <option value="reviews">–û–±–∑–æ—Ä—ã</option>
            </select>
          </div> -->

          <div class="form-group">
            <label for="file-upload">–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ</label>
            <div class="file-upload">
              <input
                type="file"
                id="file-upload"
                accept="image/jpeg, image/jpg, image/png"
                (change)="onFileSelected($event)"
              />
            </div>
          </div>

          <button type="submit" class="submit-btn" (click)="submitPost()">
            –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –ø–æ—Å—Ç
          </button>
        </form>
      </section>

      <section class="admin-section">
        <h2>–°–ø–∏—Å–æ–∫ –ø–æ—Å—Ç–æ–≤</h2>
        <div class="posts-list" *ngIf="posts.length">
          <div class="post-item" *ngFor="let post of posts">
            <div>
                <div class="post-img">
                    <img [src]="`http://localhost:5555/${post.img}`" [alt]="post.title">
                </div>
            </div>

            <div>
              <div class="post-header">
                <h3>{{ post.title }}</h3>
              </div>
              <div class="post-content">
                <p>{{ post.text }}</p>
              </div>
              <div class="post-actions">
                <button class="action-btn edit-btn" (click)="editPost()">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
                <button class="action-btn delete-btn" (click)="deletePost(post._id)">–£–¥–∞–ª–∏—Ç—å</button>
              </div>
            </div>
          </div>
        </div>
        <div class="posts-empty" *ngIf="!posts.length">–ü–æ—Å—Ç–æ–≤ –Ω–µ—Ç—É</div>
      </section>
    </div>

    <div class="tab-content" [class.active]="activeTab === 'cars'">
      <section class="admin-section">
        <h2>–§–∏–ª—å—Ç—Ä –æ–±—ä—è–≤–ª–µ–Ω–∏–π</h2>
        <div class="filter-section">
          <div class="filter-group">
            <label for="car-brand">–ú–∞—Ä–∫–∞</label>
            <input
              type="text"
              id="car-brand"
              class="form-control"
              placeholder="–õ—é–±–∞—è –º–∞—Ä–∫–∞"
            />
          </div>

          <div class="filter-group">
            <label for="car-model">–ú–æ–¥–µ–ª—å</label>
            <input
              type="text"
              id="car-model"
              class="form-control"
              placeholder="–õ—é–±–∞—è –º–æ–¥–µ–ª—å"
            />
          </div>

          <div class="filter-group">
            <label for="car-year">–ì–æ–¥</label>
            <select id="car-year" class="form-control">
              <option value="any">–õ—é–±–æ–π –≥–æ–¥</option>
              <option *ngFor="let year of [2023, 2022, 2021]" [value]="year">
                {{ year }}
              </option>
            </select>
          </div>

          <button class="filter-btn">–ü—Ä–∏–º–µ–Ω–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä</button>
        </div>
      </section>

      <section class="admin-section">
        <h2>–°–ø–∏—Å–æ–∫ –æ–±—ä—è–≤–ª–µ–Ω–∏–π</h2>
        <div class="cars-list">
          <div class="car-card" *ngFor="let car of cars">
            <div class="car-header">
              <div class="car-img">
                <img [src]="car.images[0].slice(0, car.images[0].indexOf('\\')) === 'uploads' ? `http://localhost:5555/${car.images[0]}` : car.images[0]" [alt]="`${car.brand} ${car.model}`">
              </div>
              <div class="car-title">
                <h3>{{ car.brand }} {{ car.model }} {{ car.year }}</h3>
                <p class="car-price">–¶–µ–Ω–∞: {{ formatPrice(car.price) }} —Ä—É–±.</p>
              </div>
            </div>
            <div class="car-details">
              <p><strong>–ü—Ä–æ–±–µ–≥:</strong> {{ formatPrice(car.mileage) }} –∫–º</p>
              <p><strong>–î–≤–∏–≥–∞—Ç–µ–ª—å:</strong>{{ car.engine }} / {{ car.fuelType }}</p>
              <p><strong>–ö–ü–ü:</strong>{{ car.transmission }}</p>
              <p>
                <strong>–°—Ç–∞—Ç—É—Å:</strong>
                <span class="status-active" *ngIf="car.available">–ê–∫—Ç–∏–≤–Ω–æ</span>
                <span class="status-notactive" *ngIf="!car.available">–ù–µ –ê–∫—Ç–∏–≤–Ω–æ</span>
              </p>
            </div>
            <div class="car-actions">
              <button class="action-btn edit-btn" (click)="editCar(car._id)">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
              <button class="action-btn delete-btn" (click)="deleteCar(car._id)">–£–¥–∞–ª–∏—Ç—å</button>
            </div>
          </div>
        </div>
      </section>
    </div>

    <div class="tab-content" [class.active]="activeTab === 'users'">
      <section class="admin-section">
        <h2>–ü–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</h2>
        <div class="search-section">
          <div class="search-group">
            <input
              type="text"
              class="search-input"
              placeholder="–ü–æ–∏—Å–∫ –ø–æ email –∏–ª–∏ –∏–º–µ–Ω–∏"
            />
            <button class="search-btn">üîç</button>
          </div>
        </div>
      </section>

      <section class="admin-section">
        <h2>–°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</h2>
        <table class="users-table">
          <thead>
            <tr>
              <th>ID</th>
              <th>–ò–º—è</th>
              <th>Email</th>
              <th>–†–æ–ª—å</th>
              <th>–î–µ–π—Å—Ç–≤–∏—è</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let user of [1, 2, 3]">
              <td>{{ user }}</td>
              <td>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å {{ user }}</td>
              <td>{{ "user" + user + "@example.com" }}</td>
              <td>
                <select class="role-select">
                  <option value="admin" [selected]="user === 1">
                    –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä
                  </option>
                  <option value="user" [selected]="user !== 1">
                    –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
                  </option>
                  <option value="moderator">–ú–æ–¥–µ—Ä–∞—Ç–æ—Ä</option>
                </select>
              </td>
              <td>
                <button class="icon-btn edit-icon">‚úèÔ∏è</button>
                <button class="icon-btn delete-icon">üóëÔ∏è</button>
              </td>
            </tr>
          </tbody>
        </table>
      </section>
    </div>
  </div>
</div>
